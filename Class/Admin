from sqlalchemy import create_engine, Column, Integer, String
from Class.KelasAdmin import KelasAdmin
from db.base import Base, sessionFactory

class AdminOrm(Base):

    __tablename__='admin'
    Username = Column(string) 
    Password= Column(String)
    Id_admin = Column(String,primary_key=False)
    Nama = Column (String) 
    Alamat = Column(String)
    No_Telepon= Column(Integer)

    def __init__(self, id, proposal, StockBarang, Pembelian):
        self.Username = Username
        self.Password = Password
        self.Id_admin = Id_admin
        Self.Nama = Nama
        self.Alamat = Alamat
        self.No_Telepon = No_Telepon

    @staticmethod
    def showAdmin():
        try:
            session = sessionFactory()
            for Admin in session.query(AdminOrm).all():
                print(
                    "Nama = {}\nId_admin= {}"
                     "\n===================="
                            .format(Admin.Username, Admin.Password, Admin.Id_admin, Admin.Nama, Admin.Alamat, Admin.No_Telepon))
            session.close()
        except Exception as e :
            print("===>",e)
    def insertAdmin(Id_admin):
        try:
            session = sessionFactory()
            Admin = AdminOrm(Username, Password, Id_admin, Nama, Alamat, No_Telpon)
            session.add(admin)
            session.commit()
            session.close()
        except Exception as e:
            print("===>", e)
        else:
            print("Data Berhasil Disimpan!")
            
    @staticmethod
    def verifyUsername(Password) -> bool:
        try:
            session = sessionFactory()
            if ((session.query(adminOrm).filter_by(Password=Password).count()) == 1):
                return True
            else:
                return False
            session.close()
        except Exception as e:
            print("===>", e)

